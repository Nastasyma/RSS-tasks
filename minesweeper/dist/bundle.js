(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var s=a.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p;const t=function(e){e.sort((function(){return Math.random()-.5}))};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var s,n=[],o=[],c=[],l=[],r=[],i=!0,d=10,m=!0,u=0,_=[],g={},v=!1,p=new Audio,y=new Audio,b=new Audio,L=new Audio;function f(){var e,t=document.querySelector(".game__timer-time");i||(t.textContent=(e=parseInt(t.textContent,10)+1)<10?"00".concat(e):e<100?"0".concat(e):e),s=window.setTimeout(f,1e3)}function h(e){l.length=0,r.length=0;var t=document.querySelector(".game__field");t.innerHTML="";for(var a=0;a<e;a+=1)for(var s=0;s<e;s+=1){var n=document.createElement("button");n.className="game__cell non-clicked-cell easy gray-theme",n.id="".concat(a.toString(),"-").concat(s.toString()),t.append(n),l.push(n)}for(var o=0;o<l.length;o+=e)r.push(l.slice(o,o+e))}function S(e,t){if(!(e<0||t<0||e>=d||t>=d||r[e][t].classList.contains("checked")||r[e][t].classList.contains("bomb")||r[e][t].classList.contains("flag"))){r[e][t].classList.add("checked");var a=r[e][t].dataset.count;"0"!==a&&void 0!==a?r[e][t].textContent=a:(S(e-1,t-1),S(e-1,t),S(e-1,t+1),S(e,t-1),S(e,t+1),S(e+1,t-1),S(e+1,t),S(e+1,t+1))}}function C(){var e=document.querySelectorAll(".game__cell"),a=document.querySelector(".game__moves-count"),s=document.querySelector(".game__timer-time"),l=document.querySelector(".game_popup"),r=document.querySelector(".hidden_wrapper"),_=document.querySelector(".hidden_wrapper_victory");e.forEach((function(v){v.addEventListener("click",(function(y){if(y.target.classList.contains("checked")||m&&p.play(),!v.classList.contains("flag")&&!v.classList.contains("checked")){var h=v.id.split("-"),C=parseInt(h[0],10),q=parseInt(h[1],10);console.log(C,q),"000"===a.textContent&&(f(),v.classList.remove("non-clicked-cell"),v.classList.add("first-clicked-cell"),function(e){n.length=0,o.length=0,c.length=0,u=0;var a,s=document.querySelector(".footer__settings-bombs");a=s.value<10?10:s.value;for(var l=document.querySelectorAll(".non-clicked-cell"),r=0;r<a;r+=1)o.push("bomb");for(var i=e*e-a-1,d=0;d<i;d+=1)n.push("empty-cell");c=o.concat(n),t(c);for(var m=0;m<l.length;m+=1)l[m].classList.remove("non-clicked-cell"),l[m].classList.add(c[m])}(d),function(e){for(var t=document.querySelectorAll(".game__cell"),a=0;a<t.length;a+=1){var s=0,n=a%e==0,o=a%e==e-1;(t[a].classList.contains("empty-cell")||t[a].classList.contains("first-clicked-cell"))&&(n||(a>0&&t[a-1].classList.contains("bomb")&&(s+=1),a>=e+1&&t[a-1-e].classList.contains("bomb")&&(s+=1),a<e*e-e&&t[a-1+e].classList.contains("bomb")&&(s+=1)),o||(a>e-1&&t[a+1-e].classList.contains("bomb")&&(s+=1),a<=e*e-2&&t[a+1].classList.contains("bomb")&&(s+=1),a<=e*e-e-2&&t[a+1+e].classList.contains("bomb")&&(s+=1)),a>=e&&t[a-e].classList.contains("bomb")&&(s+=1),a<=e*e-e-1&&t[a+e].classList.contains("bomb")&&(s+=1),t[a].setAttribute("data-count",s),t[a].classList.remove("empty-cell"),t[a].classList.add("cell-".concat(s)))}}(d),i=!1,v.classList.contains("cell-0")&&S(C,q));var E=v.dataset.count;"0"!==E&&void 0!==E&&(v.classList.contains("flag")||(v.textContent=E)),v.classList.contains("cell-0")?S(C,q):v.classList.contains("flag")||v.classList.add("checked"),u+=1,a.textContent=u.toString().padStart(3,0),v.classList.contains("bomb")&&(console.log("Game over!!"),i=!0,m&&b.play(),r.classList.add("hidden_wrapper_active"),l.classList.add("popup_active"),l.textContent="Game over. Try again!",r.addEventListener("click",(function(){r.classList.remove("hidden_wrapper_active"),l.classList.remove("popup_active")})),e.forEach((function(e){e.setAttribute("disabled","disabled"),e.classList.add("checked"),e.classList.remove("flag");var t=e.dataset.count;"0"!==t&&void 0!==t&&(e.textContent=t)})),document.querySelectorAll(".bomb").forEach((function(e){e.classList.add("game-over")})));var x,w=document.querySelector(".footer__settings-bombs");if(x=w.value<10?10:w.value,document.querySelectorAll(".checked").length===e.length-x){console.log("Victory!!"),i=!0,m&&L.play(),e.forEach((function(e){e.setAttribute("disabled","disabled")})),document.querySelectorAll(".bomb").forEach((function(e){e.classList.add("flag")})),document.querySelector(".game__bombs-count").textContent="000",document.querySelector(".game__flags-count").textContent=x.toString().padStart(3,0),_.classList.add("hidden_wrapper_active"),l.classList.add("popup_active");var I,A=+s.textContent.replace(/^0+/,""),k=+a.textContent.replace(/^0+/,"");l.textContent="Hooray! You found all mines in ".concat(A," seconds and ").concat(k," moves!"),document.querySelector(".footer__settings-easy").classList.contains("level-active")?I="10x10":document.querySelector(".footer__settings-medium").classList.contains("level-active")?I="15x15":document.querySelector(".footer__settings-hard").classList.contains("level-active")&&(I="25x25"),g={movesCounter:k,time:A,level:I}}}}))}))}function q(){var e,t,a=document.querySelectorAll(".game__cell"),s=document.querySelector(".game__bombs-count"),n=document.querySelector(".game__flags-count"),o=document.querySelector(".footer__settings-bombs"),c=document.querySelector(".game__moves-count");e=localStorage.getItem("nastasyma_bombs_indicator")?+document.querySelector(".game__bombs-count").textContent:o.value,t=localStorage.getItem("nastasyma_flags_indicator")?+document.querySelector(".game__flags-count").textContent:0,a.forEach((function(a){a.addEventListener("contextmenu",(function(a){a.preventDefault(),"000"!==c.textContent&&(a.target.classList.contains("checked")||(m&&y.play(),a.target.classList.toggle("flag"),a.target.classList.contains("flag")?(t+=1,e-=1):(t-=1,e+=1),n.textContent=t.toString().padStart(3,0),e>=0?(s.classList.remove("bombs_stop"),s.textContent=e.toString().padStart(3,0)):s.classList.add("bombs_stop")))}))}))}function E(e){var t=document.querySelector(".game__timer-time"),a=document.querySelector(".game__moves-count"),n=document.querySelector(".footer__settings-bombs"),o=document.querySelector(".game__bombs-count"),c=document.querySelector(".game__flags-count");t.textContent="000",window.clearTimeout(s),a.textContent="000",c.textContent="000",n.value<10?o.textContent="010":o.textContent="0".concat(n.value),o.classList.remove("bombs_stop"),h(e),C(),q();var l=document.querySelector(".game__settings-theme"),r=document.querySelectorAll(".game__cell");l.classList.contains("blue")?r.forEach((function(e){e.classList.remove("gray-theme"),e.classList.add("blue-theme")})):r.forEach((function(e){e.classList.remove("blue-theme"),e.classList.add("gray-theme")}))}function x(){E(d),document.querySelector(".footer__settings-easy").classList.contains("level-active")?document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("medium"),e.classList.remove("hard"),e.classList.add("easy")})):document.querySelector(".footer__settings-medium").classList.contains("level-active")?document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("easy"),e.classList.remove("hard"),e.classList.add("medium")})):document.querySelector(".footer__settings-hard").classList.contains("level-active")&&document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("medium"),e.classList.remove("easy"),e.classList.add("hard")}))}function w(){localStorage.getItem("nastasyma_countermoves")&&(u=+localStorage.getItem("nastasyma_countermoves")),localStorage.getItem("nastasyma_countermoves_indicator")&&(document.querySelector(".game__moves-count").textContent=localStorage.getItem("nastasyma_countermoves_indicator")),localStorage.getItem("nastasyma_flags_indicator")&&(document.querySelector(".game__flags-count").textContent=localStorage.getItem("nastasyma_flags_indicator")),localStorage.getItem("nastasyma_bombs_indicator")&&(document.querySelector(".game__bombs-count").textContent=localStorage.getItem("nastasyma_bombs_indicator")),localStorage.getItem("nastasyma_time_indicator")&&(document.querySelector(".game__timer-time").textContent=localStorage.getItem("nastasyma_time_indicator")),localStorage.getItem("nastasyma_game_field")&&(document.querySelector(".game__field").innerHTML=localStorage.getItem("nastasyma_game_field")),localStorage.getItem("nastasyma_bombs_amount")&&(document.querySelector(".footer__settings-bombs").value=localStorage.getItem("nastasyma_bombs_amount")),localStorage.getItem("nastasyma_gameover")&&(i=JSON.parse(localStorage.getItem("nastasyma_gameover"))),localStorage.getItem("nastasyma_is-play")&&(m=JSON.parse(localStorage.getItem("nastasyma_is-play"))),localStorage.getItem("nastasyma_theme")&&(document.querySelector(".game__settings-theme").textContent=localStorage.getItem("nastasyma_theme")),C(),q(),window.clearTimeout(s),f();var e,t=document.querySelector(".game__settings-volume");m?t.classList.remove("click_mute"):t.classList.add("click_mute");for(var n=document.querySelectorAll(".game__cell"),o=document.querySelectorAll(".level-button"),c=0;c<o.length;c+=1)o[c].classList.remove("level-active");100===n.length?(document.querySelector(".footer__settings-easy").classList.add("level-active"),document.querySelector(".game__settings-field-size").textContent="Field size: 10x10",d=10):225===n.length?(document.querySelector(".footer__settings-medium").classList.add("level-active"),document.querySelector(".game__settings-field-size").textContent="Field size: 15x15",d=15):625===n.length&&(document.querySelector(".footer__settings-hard").classList.add("level-active"),document.querySelector(".game__settings-field-size").textContent="Field size: 25x25",d=25),l.length=0,r.length=0,l.push.apply(l,function(e){if(Array.isArray(e))return a(e)}(e=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());for(var _=0;_<l.length;_+=d)r.push(l.slice(_,_+d));var g=document.querySelector(".game__settings-theme"),v=document.querySelectorAll(".game__button"),p=document.body;"blue"===g.textContent?(g.classList.remove("gray"),g.classList.add("blue"),n.forEach((function(e){e.classList.remove("gray-theme"),e.classList.add("blue-theme")})),v.forEach((function(e){e.classList.remove("btn-gray"),e.classList.add("btn-blue")})),p.classList.remove("gray-bg"),p.classList.add("blue-bg")):(g.textContent="gray",g.classList.remove("blue"),g.classList.add("gray"),n.forEach((function(e){e.classList.remove("blue-theme"),e.classList.add("gray-theme")})),v.forEach((function(e){e.classList.remove("btn-blue"),e.classList.add("btn-gray")})),p.classList.remove("blue-bg"),p.classList.add("gray-bg"))}window.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("nastasyma_results_list")&&(document.querySelector(".results_list").innerHTML=localStorage.getItem("nastasyma_results_list")),localStorage.getItem("nastasyma_results_array")&&(_=JSON.parse(localStorage.getItem("nastasyma_results_array"))),localStorage.getItem("nastasyma_is-saved")&&(v=JSON.parse(localStorage.getItem("nastasyma_is-saved")),document.querySelector(".load_popup").classList.add("popup_active"),document.querySelector(".hidden_wrapper_load").classList.add("hidden_wrapper_active"))}));var I,A,k,N,T,M,z,O,F,J,H,j=document.body;!function(){var e=document.createElement("header");e.classList.add("header");var t=document.createElement("div");t.classList.add("header__container");var a=document.createElement("button");a.className="game__button button-newgame btn-gray",a.textContent="New game";var s=document.createElement("button");s.className="game__button button-save btn-gray",s.textContent="Save";var n=document.createElement("button");n.className="game__button button-load btn-gray",n.textContent="Load";var o=document.createElement("button");o.className="game__button button-results btn-gray",o.textContent="Results",t.appendChild(a),t.appendChild(s),t.appendChild(n),t.appendChild(o),e.appendChild(t),j.append(e),j.classList.add("gray-bg")}(),function(){var e=document.createElement("main");e.classList.add("game");var t=document.createElement("div");t.classList.add("game__container");var a=document.createElement("div");a.classList.add("game_popup"),t.appendChild(a);var s=document.createElement("div");s.classList.add("load_popup"),t.appendChild(s);var n=document.createElement("button");n.className="start_button start-newgame",n.textContent="NEW GAME",s.appendChild(n);var o=document.createElement("button");o.className="start_button start-load",o.textContent="LOAD GAME",s.appendChild(o);var c=document.createElement("div");c.classList.add("results_popup");var l=document.createElement("span");l.classList.add("results_title"),l.textContent="Last 10 results:";var r=document.createElement("ol");r.classList.add("results_list");var i=document.createElement("div");i.classList.add("results_list_item"),i.textContent="Win your first game!",c.appendChild(l),c.appendChild(r),r.appendChild(i),t.appendChild(c);var d=document.createElement("div");d.classList.add("game__stats"),t.appendChild(d);var m=document.createElement("div");m.classList.add("game__stats-wrapper"),d.appendChild(m);var u=document.createElement("div");u.classList.add("game__flags");var _=document.createElement("div");_.classList.add("game__flags-title"),_.textContent="Flags:";var g=document.createElement("div");g.classList.add("game__flags-count"),g.textContent="000",u.appendChild(_),u.appendChild(g);var v=document.createElement("div");v.classList.add("game__bombs");var p=document.createElement("div");p.classList.add("game__bombs-title"),p.textContent="Bombs:";var y=document.createElement("div");y.classList.add("game__bombs-count"),y.textContent="010",v.appendChild(p),v.appendChild(y);var b=document.createElement("div");b.classList.add("game__moves");var L=document.createElement("div");L.classList.add("game__moves-title"),L.textContent="Moves:";var f=document.createElement("div");f.classList.add("game__moves-count"),f.textContent="000",b.appendChild(L),b.appendChild(f);var h=document.createElement("div");h.classList.add("game__timer");var S=document.createElement("div");S.classList.add("game__timer-title"),S.textContent="Timer:";var C=document.createElement("div");C.classList.add("game__timer-time"),C.textContent="000",h.appendChild(S),h.appendChild(C),m.appendChild(u),m.appendChild(v),m.appendChild(b),m.appendChild(h);var q=document.createElement("div");q.classList.add("game__wrapper"),t.appendChild(q);var E=document.createElement("div");E.classList.add("game__field"),q.appendChild(E);var x=document.createElement("div");x.classList.add("game__settings"),t.appendChild(x);var w=document.createElement("div");w.classList.add("game__settings-wrapper"),x.appendChild(w);var I=document.createElement("div");I.classList.add("game__settings-field-size"),I.textContent="Field size: 10x10";var A=document.createElement("button");A.className="game__settings-theme game__button gray btn-gray",A.textContent="gray";var k=document.createElement("button");k.className="game__settings-volume game__button btn-gray",w.appendChild(I),w.appendChild(A),w.appendChild(k);var N=document.createElement("div");N.classList.add("hidden_wrapper"),t.appendChild(N);var T=document.createElement("div");T.classList.add("hidden_wrapper_victory"),t.appendChild(T);var M=document.createElement("div");M.classList.add("hidden_wrapper_load"),t.appendChild(M),e.appendChild(t),j.append(e)}(),function(){var e=document.createElement("footer");e.classList.add("footer");var t=document.createElement("div");t.classList.add("footer__container");var a=document.createElement("button");a.className="footer__settings-easy game__button btn-gray level-button level-active",a.textContent="Easy";var s=document.createElement("button");s.className="footer__settings-medium game__button btn-gray level-button",s.textContent="Medium";var n=document.createElement("button");n.className="footer__settings-hard game__button btn-gray level-button",n.textContent="Hard";var o=document.createElement("input");o.classList.add("footer__settings-bombs"),o.type="number",o.value="10",o.placeholder="number of bombs",o.min="10",o.max="99",t.appendChild(a),t.appendChild(s),t.appendChild(n),t.appendChild(o),e.appendChild(t),j.append(e)}(),p.src="assets/audio/click.mp3",y.src="assets/audio/set-flag.mp3",b.src="assets/audio/game-over-mario.mp3",L.src="assets/audio/victory-mario.mp3",h(10),C(),I=document.querySelector(".footer__settings-bombs"),A=document.querySelector(".game__bombs-count"),I.addEventListener("input",(function(){I.value<0?I.value=Math.abs(I.value):I.value>99&&(I.value=99),I.value.length>2&&(I.value=I.value.slice(0,2)),I.value>=10&&(A.textContent="0".concat(I.value)),x()})),q(),(k=document.querySelectorAll(".level-button")).forEach((function(e){e.addEventListener("click",(function(e){for(var t=0;t<k.length;t+=1)k[t].classList.remove("level-active");e.target.classList.add("level-active"),e.target.classList.contains("footer__settings-easy")&&(E(d=10),document.querySelector(".game__settings-field-size").textContent="Field size: 10x10",document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("medium"),e.classList.remove("hard"),e.classList.add("easy")}))),e.target.classList.contains("footer__settings-medium")&&(E(d=15),document.querySelector(".game__settings-field-size").textContent="Field size: 15x15",document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("easy"),e.classList.remove("hard"),e.classList.add("medium")}))),e.target.classList.contains("footer__settings-hard")&&(E(d=25),document.querySelector(".game__settings-field-size").textContent="Field size: 25x25",document.querySelectorAll(".game__cell").forEach((function(e){e.classList.remove("medium"),e.classList.remove("easy"),e.classList.add("hard")})))}))})),(N=document.querySelector(".game__settings-volume")).addEventListener("click",(function(){m?(m=!1,N.classList.add("click_mute")):(N.classList.remove("click_mute"),m=!0)})),T=document.querySelector(".button-save"),M=document.querySelector(".game_popup"),z=document.querySelector(".hidden_wrapper"),T.addEventListener("click",(function(){z.classList.add("hidden_wrapper_active"),M.classList.add("popup_active"),"000"!==document.querySelector(".game__moves-count").textContent?(M.textContent="Your game has been saved!",v=!0,localStorage.setItem("nastasyma_countermoves",u),localStorage.setItem("nastasyma_countermoves_indicator",document.querySelector(".game__moves-count").textContent),localStorage.setItem("nastasyma_flags_indicator",document.querySelector(".game__flags-count").textContent),localStorage.setItem("nastasyma_bombs_indicator",document.querySelector(".game__bombs-count").textContent),localStorage.setItem("nastasyma_time_indicator",document.querySelector(".game__timer-time").textContent),localStorage.setItem("nastasyma_game_field",document.querySelector(".game__field").innerHTML),localStorage.setItem("nastasyma_bombs_amount",document.querySelector(".footer__settings-bombs").value),localStorage.setItem("nastasyma_gameover",JSON.stringify(i)),localStorage.setItem("nastasyma_theme",document.querySelector(".game__settings-theme").textContent),localStorage.setItem("nastasyma_is-saved",JSON.stringify(v)),localStorage.setItem("nastasyma_is-play",JSON.stringify(m))):M.textContent="Start the game before saving!"})),function(){var e=document.querySelector(".button-results"),t=document.querySelector(".results_popup"),a=document.querySelector(".hidden_wrapper");e.addEventListener("click",(function(){a.classList.add("hidden_wrapper_active"),t.classList.add("popup_active")}))}(),function(){var e=document.querySelector(".game_popup"),t=document.querySelector(".hidden_wrapper"),a=document.querySelector(".hidden_wrapper_victory"),s=document.querySelector(".results_list"),n=document.querySelector(".results_popup");a.addEventListener("click",(function(){a.classList.remove("hidden_wrapper_active"),e.classList.remove("popup_active"),_.length>=10&&_.shift(),_.push(g),localStorage.setItem("nastasyma_results_array",JSON.stringify(_)),s.innerHTML="";for(var t=0;t<_.length;t+=1){var n=document.createElement("li");n.classList.add("results_item"),n.textContent="Field: ".concat(_[t].level," Time: ").concat(_[t].time,"s Moves: ").concat(_[t].movesCounter,"."),s.appendChild(n),localStorage.setItem("nastasyma_results_list",s.innerHTML)}})),t.addEventListener("click",(function(){t.classList.remove("hidden_wrapper_active"),e.classList.remove("popup_active"),n.classList.remove("popup_active")}))}(),O=document.querySelector(".start-newgame"),F=document.querySelector(".start-load"),J=document.querySelector(".hidden_wrapper_load"),H=document.querySelector(".load_popup"),O.addEventListener("click",(function(){x(),J.classList.remove("hidden_wrapper_active"),H.classList.remove("popup_active")})),F.addEventListener("click",(function(){w(),J.classList.remove("hidden_wrapper_active"),H.classList.remove("popup_active")})),document.querySelector(".button-load").addEventListener("click",(function(){if(localStorage.getItem("nastasyma_is-saved")){v=JSON.parse(localStorage.getItem("nastasyma_is-saved"));var e=document.querySelector(".game_popup");document.querySelector(".hidden_wrapper").classList.add("hidden_wrapper_active"),e.classList.add("popup_active"),e.textContent="Your game has been loaded!",w()}})),document.querySelector(".game__settings-theme").addEventListener("click",(function(){var e=document.querySelector(".game__settings-theme"),t=document.querySelectorAll(".game__cell"),a=document.querySelectorAll(".game__button"),s=document.body;e.classList.contains("gray")?(e.textContent="blue",e.classList.remove("gray"),e.classList.add("blue"),t.forEach((function(e){e.classList.remove("gray-theme"),e.classList.add("blue-theme")})),a.forEach((function(e){e.classList.remove("btn-gray"),e.classList.add("btn-blue")})),s.classList.remove("gray-bg"),s.classList.add("blue-bg")):(e.textContent="gray",e.classList.remove("blue"),e.classList.add("gray"),t.forEach((function(e){e.classList.remove("blue-theme"),e.classList.add("gray-theme")})),a.forEach((function(e){e.classList.remove("btn-blue"),e.classList.add("btn-gray")})),s.classList.remove("blue-bg"),s.classList.add("gray-bg"))})),document.querySelector(".button-newgame").addEventListener("click",x)})();